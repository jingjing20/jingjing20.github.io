(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{374:function(t,s,n){"use strict";n.r(s);var a=n(42),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"ä¸€ã€æµè§ˆå™¨ä¸­çš„-javascript-äº‹ä»¶å¾ªç¯æœºåˆ¶"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ã€æµè§ˆå™¨ä¸­çš„-javascript-äº‹ä»¶å¾ªç¯æœºåˆ¶"}},[t._v("#")]),t._v(" ä¸€ã€æµè§ˆå™¨ä¸­çš„ JavaScript äº‹ä»¶å¾ªç¯æœºåˆ¶")]),t._v(" "),n("p",[t._v("ä»ä¸€é“é¢è¯•é¢˜æ¥å­¦ä¹ æµè§ˆå™¨ä¸­çš„ JavaScript äº‹ä»¶å¾ªç¯æœºåˆ¶ï¼Œ\né¢˜ç›®å¦‚ä¸‹ï¼šğŸ‘‡ ğŸ‘‡ ğŸ‘‡")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("async1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'async1 start'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("async2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'async1 end'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("async2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'async2'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'script start'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'setTimeout'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("async1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'promise1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'promise2'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'script end'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br")])]),n("p",[t._v("è¿™é“é¢˜ä¸»è¦è€ƒå¯Ÿçš„æ˜¯äº‹ä»¶å¾ªç¯ä¸­å‡½æ•°æ‰§è¡Œé¡ºåºçš„é—®é¢˜ï¼Œå…¶ä¸­åŒ…æ‹¬ "),n("code",[t._v("async")]),t._v(" ï¼Œ"),n("code",[t._v("await")]),t._v("ï¼Œ"),n("code",[t._v("setTimeout")]),t._v("ï¼Œ"),n("code",[t._v("Promise")]),t._v("å‡½æ•°ã€‚")]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("æ¸©é¦¨æç¤º")]),t._v(" "),n("p",[t._v("å…ˆçœ‹çœ‹è§£é¢˜éœ€è¦å“ªäº›çŸ¥è¯†å‚¨å¤‡ï¼Œä¸€æ­¥ä¸€æ­¥æ¥è§£å†³å®ƒã€‚")])]),t._v(" "),n("h3",{attrs:{id:"ä»»åŠ¡é˜Ÿåˆ—"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä»»åŠ¡é˜Ÿåˆ—"}},[t._v("#")]),t._v(" ä»»åŠ¡é˜Ÿåˆ—")]),t._v(" "),n("p",[t._v("é¦–å…ˆæˆ‘ä»¬éœ€è¦æ˜ç™½ä»¥ä¸‹å‡ ä»¶äº‹æƒ…ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("JS åˆ†ä¸ºåŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡")]),t._v(" "),n("li",[t._v("åŒæ­¥ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆ")]),t._v(" "),n("li",[t._v("ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œäº‹ä»¶è§¦å‘çº¿ç¨‹ç®¡ç†ç€ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼Œåªè¦å¼‚æ­¥ä»»åŠ¡æœ‰äº†è¿è¡Œç»“æœï¼Œå°±åœ¨ä»»åŠ¡é˜Ÿåˆ—ä¹‹ä¸­æ”¾ç½®ä¸€ä¸ªäº‹ä»¶ã€‚")]),t._v(" "),n("li",[t._v("ä¸€æ—¦æ‰§è¡Œæ ˆä¸­çš„æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼ˆæ­¤æ—¶ JS å¼•æ“ç©ºé—²ï¼‰ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–ä»»åŠ¡é˜Ÿåˆ—ï¼Œå°†å¯è¿è¡Œçš„å¼‚æ­¥ä»»åŠ¡æ·»åŠ åˆ°å¯æ‰§è¡Œæ ˆä¸­ï¼Œå¼€å§‹æ‰§è¡Œã€‚")])]),t._v(" "),n("h3",{attrs:{id:"å®ä»»åŠ¡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å®ä»»åŠ¡"}},[t._v("#")]),t._v(" å®ä»»åŠ¡")]),t._v(" "),n("p",[n("code",[t._v("(macro)task")]),t._v("ï¼ˆåˆç§°ä¹‹ä¸ºå®ä»»åŠ¡ï¼‰ï¼Œå¯ä»¥ç†è§£æ˜¯æ¯æ¬¡æ‰§è¡Œæ ˆæ‰§è¡Œçš„ä»£ç å°±æ˜¯ä¸€ä¸ªå®ä»»åŠ¡ï¼ˆåŒ…æ‹¬æ¯æ¬¡ä»äº‹ä»¶é˜Ÿåˆ—ä¸­è·å–ä¸€ä¸ªäº‹ä»¶å›è°ƒå¹¶æ”¾åˆ°æ‰§è¡Œæ ˆä¸­æ‰§è¡Œï¼‰ã€‚")]),t._v(" "),n("p",[t._v("æµè§ˆå™¨ä¸ºäº†èƒ½å¤Ÿä½¿å¾— JS å†…éƒ¨ "),n("code",[t._v("(macro)task")]),t._v(" ä¸ "),n("code",[t._v("DOM")]),t._v(" ä»»åŠ¡èƒ½å¤Ÿæœ‰åºçš„æ‰§è¡Œï¼Œ"),n("strong",[n("em",[t._v("ä¼šåœ¨ä¸€ä¸ª(macro)task æ‰§è¡Œç»“æŸåï¼Œåœ¨ä¸‹ä¸€ä¸ª(macro)task æ‰§è¡Œå¼€å§‹å‰ï¼Œå¯¹é¡µé¢è¿›è¡Œé‡æ–°æ¸²æŸ“ï¼Œæµç¨‹å¦‚ä¸‹ï¼š")])])]),t._v(" "),n("p",[n("code",[t._v("(macro)task-> æ¸²æŸ“ ->(macro)task->...")])]),t._v(" "),n("p",[t._v("æŒ‰ç…§è§„å®šï¼Œèƒ½å‘èµ·å®è§‚ä»»åŠ¡çš„æ–¹æ³•æœ‰ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("script(æ•´ä½“ä»£ç )ã€"),n("code",[t._v("setTimeout")]),t._v("ã€ "),n("code",[t._v("setInterval")]),t._v("ã€"),n("code",[t._v("I/O")]),t._v("ã€UI äº¤äº’äº‹ä»¶ã€"),n("code",[t._v("postMessage")]),t._v("ã€"),n("code",[t._v("MessageChannel")]),t._v("ã€"),n("code",[t._v("setImmediate")]),t._v("(Node.js ç¯å¢ƒ)ï¼›")])]),t._v(" "),n("h3",{attrs:{id:"å¾®ä»»åŠ¡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å¾®ä»»åŠ¡"}},[t._v("#")]),t._v(" å¾®ä»»åŠ¡")]),t._v(" "),n("p",[t._v("microtaskï¼ˆåˆç§°ä¸ºå¾®ä»»åŠ¡ï¼‰ï¼Œå¯ä»¥ç†è§£æ˜¯ "),n("strong",[n("em",[t._v("åœ¨å½“å‰ task æ‰§è¡Œç»“æŸåç«‹å³æ‰§è¡Œçš„ä»»åŠ¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å½“å‰ task ä»»åŠ¡åï¼Œä¸‹ä¸€ä¸ª task ä¹‹å‰ï¼Œåœ¨æ¸²æŸ“ä¹‹å‰ã€‚")])])]),t._v(" "),n("p",[t._v("æ‰€ä»¥å®ƒçš„å“åº”é€Ÿåº¦ç›¸æ¯”"),n("code",[t._v("setTimeout")]),t._v("ï¼ˆ "),n("code",[t._v("setTimeout")]),t._v(" æ˜¯ "),n("code",[t._v("task")]),t._v(" ï¼‰ä¼šæ›´å¿«ï¼Œå› ä¸ºæ— éœ€ç­‰æ¸²æŸ“ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æŸä¸€ä¸ª "),n("code",[t._v("macrotask")]),t._v(" æ‰§è¡Œå®Œåï¼Œå°±ä¼šå°†åœ¨å®ƒæ‰§è¡ŒæœŸé—´äº§ç”Ÿçš„æ‰€æœ‰ "),n("code",[t._v("microtask")]),t._v(" éƒ½æ‰§è¡Œå®Œæ¯•ï¼ˆåœ¨æ¸²æŸ“å‰ï¼‰ã€‚")]),t._v(" "),n("p",[n("code",[t._v("microtask")]),t._v(" ä¸»è¦åŒ…å«ï¼š "),n("code",[t._v("Promise.then")]),t._v("ã€"),n("code",[t._v("MutaionObserver")]),t._v("ã€"),n("code",[t._v("process.nextTick")]),t._v("("),n("code",[t._v("Node.js")]),t._v(" ç¯å¢ƒ)ã€‚"),n("code",[t._v("async/await")]),t._v("å®é™…ä¸Šæ˜¯ "),n("code",[t._v("promise+generator")]),t._v(" çš„è¯­æ³•ç³–ï¼Œä¹Ÿå°±æ˜¯"),n("code",[t._v("promise")]),t._v("ï¼Œä¹Ÿå°±æ˜¯å¾®è§‚ä»»åŠ¡ã€‚")]),t._v(" "),n("h3",{attrs:{id:"è¿è¡Œæœºåˆ¶"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è¿è¡Œæœºåˆ¶"}},[t._v("#")]),t._v(" è¿è¡Œæœºåˆ¶")]),t._v(" "),n("p",[n("strong",[t._v("åœ¨äº‹ä»¶å¾ªç¯ä¸­ï¼Œæ¯è¿›è¡Œä¸€æ¬¡å¾ªç¯æ“ä½œç§°ä¸º tickï¼Œæ¯ä¸€æ¬¡ tick çš„ä»»åŠ¡å¤„ç†æ¨¡å‹æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œä½†å…³é”®æ­¥éª¤å¦‚ä¸‹ï¼š")])]),t._v(" "),n("ul",[n("li",[t._v("æ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼ˆæ ˆä¸­æ²¡æœ‰å°±ä»äº‹ä»¶é˜Ÿåˆ—ä¸­è·å–ï¼‰")]),t._v(" "),n("li",[t._v("æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚æœé‡åˆ°å¾®ä»»åŠ¡ï¼Œå°±å°†å®ƒæ·»åŠ åˆ°å¾®ä»»åŠ¡çš„ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚")]),t._v(" "),n("li",[t._v("å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œç«‹å³æ‰§è¡Œå½“å‰å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰å¾®ä»»åŠ¡ã€‚ï¼ˆæ³¨æ„ï¼ï¼æ‰§è¡Œé¡ºåºä¹Ÿæ˜¯æŒ‰ç…§äº§ç”Ÿé¡ºåºæ¥çš„ï¼‰")]),t._v(" "),n("li",[t._v("å½“å‰å®ä»»åŠ¡å®Œå…¨æ‰§è¡Œåï¼Œå¼€å§‹æ£€æŸ¥æ¸²æŸ“ï¼Œç„¶å GUI çº¿ç¨‹æ¥ç®¡æ¸²æŸ“ã€‚")]),t._v(" "),n("li",[t._v("æ¸²æŸ“å®Œæ¯•åï¼ŒJS çº¿ç¨‹ç»§ç»­æ¥ç®¡ï¼Œå¼€å§‹ä¸‹ä¸€ä¸ªå®ä»»åŠ¡ï¼ˆä»äº‹ä»¶é˜Ÿåˆ—ä¸­è·å–ï¼‰")])]),t._v(" "),n("blockquote",[n("p",[n("strong",[t._v("æµç¨‹å›¾å¤§è‡´å¦‚ä¸‹ï¼š")])])]),t._v(" "),n("p",[n("img",{attrs:{src:"http://image.jinghao.xyz/blog/20200609/eQDAFjpr6XlQ.png",alt:"mark"}})]),t._v(" "),n("h3",{attrs:{id:"promise-å’Œ-async-ä¸­çš„ç«‹å³æ‰§è¡Œ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#promise-å’Œ-async-ä¸­çš„ç«‹å³æ‰§è¡Œ"}},[t._v("#")]),t._v(" Promise å’Œ async ä¸­çš„ç«‹å³æ‰§è¡Œ")]),t._v(" "),n("p",[t._v("æˆ‘ä»¬çŸ¥é“ "),n("code",[t._v("Promise")]),t._v(" ä¸­çš„å¼‚æ­¥ä½“ç°åœ¨ "),n("code",[t._v("then")]),t._v(" å’Œ "),n("code",[t._v("catch")]),t._v(" ä¸­ï¼Œæ‰€ä»¥å†™åœ¨ "),n("code",[t._v("Promise")]),t._v(" ä¸­çš„ä»£ç æ˜¯è¢«å½“åšåŒæ­¥ä»»åŠ¡ç«‹å³æ‰§è¡Œçš„ã€‚è€Œåœ¨"),n("code",[t._v("async/await")]),t._v(" ä¸­ï¼Œåœ¨å‡ºç° "),n("code",[t._v("await")]),t._v(" å‡ºç°ä¹‹å‰ï¼Œå…¶ä¸­çš„ä»£ç ä¹Ÿæ˜¯ç«‹å³æ‰§è¡Œçš„ã€‚é‚£ä¹ˆå‡ºç°äº† "),n("code",[t._v("await")]),t._v(" æ—¶å€™å‘ç”Ÿäº†ä»€ä¹ˆå‘¢ï¼Ÿ")]),t._v(" "),n("h3",{attrs:{id:"await-åšäº†ä»€ä¹ˆ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#await-åšäº†ä»€ä¹ˆ"}},[t._v("#")]),t._v(" await åšäº†ä»€ä¹ˆ")]),t._v(" "),n("p",[t._v("ä»å­—é¢æ„æ€ä¸Šçœ‹ "),n("code",[t._v("await")]),t._v(" å°±æ˜¯ç­‰å¾…ï¼Œ "),n("code",[t._v("await")]),t._v(" ç­‰å¾…çš„æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè¿™ä¸ªè¡¨è¾¾å¼çš„è¿”å›å€¼å¯ä»¥æ˜¯ä¸€ä¸ª "),n("code",[t._v("promise")]),t._v(" å¯¹è±¡ä¹Ÿå¯ä»¥æ˜¯å…¶ä»–å€¼ã€‚")]),t._v(" "),n("p",[t._v("å¾ˆå¤šäººä»¥ä¸º "),n("code",[t._v("await")]),t._v(" ä¼šä¸€ç›´ç­‰å¾…ä¹‹åçš„è¡¨è¾¾å¼æ‰§è¡Œå®Œä¹‹åæ‰ä¼šç»§ç»­æ‰§è¡Œåé¢çš„ä»£ç ï¼Œ"),n("strong",[t._v("å®é™…ä¸Š "),n("code",[t._v("await")]),t._v(" æ˜¯ä¸€ä¸ªè®©å‡ºçº¿ç¨‹çš„æ ‡å¿—ã€‚await åé¢çš„è¡¨è¾¾å¼ä¼šå…ˆæ‰§è¡Œä¸€éï¼Œå°† "),n("code",[t._v("await")]),t._v(" åé¢çš„ä»£ç åŠ å…¥åˆ° "),n("code",[t._v("microtask")]),t._v(" ä¸­ï¼Œç„¶åå°±ä¼šè·³å‡ºæ•´ä¸ª "),n("code",[t._v("async")]),t._v(" å‡½æ•°æ¥æ‰§è¡Œåé¢çš„ä»£ç ã€‚")]),t._v("\nç”±äºå› ä¸º"),n("code",[t._v("async await")]),t._v(" æœ¬èº«å°±æ˜¯ "),n("code",[t._v("promise+generator")]),t._v(" çš„è¯­æ³•ç³–ã€‚æ‰€ä»¥ "),n("code",[t._v("await")]),t._v(" åé¢çš„ä»£ç æ˜¯ "),n("code",[t._v("microtask")]),t._v("ã€‚æ‰€ä»¥å¯¹äºæœ¬é¢˜ä¸­çš„")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("async1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'async1 start'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("async2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'async1 end'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br")])]),n("p",[t._v("ç­‰ä»·äºå¦‚ä¸‹ï¼š")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("async1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'async1 start'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tPromise"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("async2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'async1 end'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br")])]),n("h3",{attrs:{id:"è§£é¢˜è¿‡ç¨‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è§£é¢˜è¿‡ç¨‹"}},[t._v("#")]),t._v(" è§£é¢˜è¿‡ç¨‹")]),t._v(" "),n("ul",[n("li",[t._v("1ã€é¦–å…ˆï¼Œäº‹ä»¶å¾ªç¯ä»å®ä»»åŠ¡(macrotask)é˜Ÿåˆ—å¼€å§‹ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œåªæœ‰ä¸€ä¸ª "),n("code",[t._v("script")]),t._v(" (æ•´ä½“ä»£ç )ä»»åŠ¡ï¼›å½“é‡åˆ°ä»»åŠ¡æº "),n("code",[t._v("(task source)")]),t._v(" æ—¶ï¼Œåˆ™ä¼šå…ˆåˆ†å‘ä»»åŠ¡åˆ°å¯¹åº”çš„ä»»åŠ¡é˜Ÿåˆ—ä¸­å»ã€‚æ‰€ä»¥ï¼Œä¸Šé¢ä¾‹å­çš„ç¬¬ä¸€æ­¥æ‰§è¡Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š")])]),t._v(" "),n("p",[n("img",{attrs:{src:"http://image.jinghao.xyz/blog/20200523/scMMNrd2WzgK.png",alt:"mark"}})]),t._v(" "),n("ul",[n("li",[t._v("2ã€ç„¶åæˆ‘ä»¬çœ‹åˆ°é¦–å…ˆå®šä¹‰äº†ä¸¤ä¸ª async å‡½æ•°ï¼Œæ¥ç€å¾€ä¸‹çœ‹ï¼Œç„¶åé‡åˆ°äº† console è¯­å¥ï¼Œç›´æ¥è¾“å‡º script startã€‚è¾“å‡ºä¹‹åï¼Œscript ä»»åŠ¡ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œé‡åˆ° setTimeoutï¼Œå…¶ä½œä¸ºä¸€ä¸ªå®ä»»åŠ¡æºï¼Œåˆ™ä¼šå…ˆå°†å…¶ä»»åŠ¡åˆ†å‘åˆ°å¯¹åº”çš„é˜Ÿåˆ—ä¸­ï¼š")])]),t._v(" "),n("p",[n("img",{attrs:{src:"http://image.jinghao.xyz/blog/20200523/CiOoJMlOe2qa.png",alt:"mark"}})]),t._v(" "),n("ul",[n("li",[t._v("3ã€"),n("code",[t._v("script")]),t._v(" ä»»åŠ¡ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œæ‰§è¡Œäº† "),n("code",[t._v("async1()")]),t._v(" å‡½æ•°ï¼Œå‰é¢è®²è¿‡ async å‡½æ•°ä¸­åœ¨ "),n("code",[t._v("await")]),t._v(" ä¹‹å‰çš„ä»£ç æ˜¯ç«‹å³æ‰§è¡Œçš„ï¼Œæ‰€ä»¥ä¼šç«‹å³è¾“å‡º "),n("strong",[n("em",[t._v("async1 start")])]),t._v("ã€‚")])]),t._v(" "),n("p",[t._v("é‡åˆ°äº† "),n("code",[t._v("await")]),t._v(" æ—¶ï¼Œä¼šå°† "),n("code",[t._v("await")]),t._v(" åé¢çš„è¡¨è¾¾å¼æ‰§è¡Œä¸€éï¼Œæ‰€ä»¥å°±ç´§æ¥ç€è¾“å‡º "),n("code",[t._v("async")]),t._v("2ï¼Œç„¶åå°† "),n("code",[t._v("await")]),t._v(" åé¢çš„ä»£ç ä¹Ÿå°±æ˜¯ "),n("code",[t._v("console.log('async1 end')")]),t._v(" åŠ å…¥åˆ° "),n("code",[t._v("microtask")]),t._v(" ä¸­çš„ "),n("code",[t._v("Promise")]),t._v(" é˜Ÿåˆ—ä¸­ï¼Œæ¥ç€è·³å‡º "),n("code",[t._v("async1")]),t._v(" å‡½æ•°æ¥æ‰§è¡Œåé¢çš„ä»£ç ã€‚")]),t._v(" "),n("p",[n("img",{attrs:{src:"http://image.jinghao.xyz/blog/20200523/spj15G9advzk.png",alt:"mark"}})]),t._v(" "),n("ul",[n("li",[t._v("4ã€"),n("code",[t._v("script")]),t._v(" ä»»åŠ¡ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œé‡åˆ° "),n("code",[t._v("Promise")]),t._v(" å®ä¾‹ã€‚ç”±äº "),n("code",[t._v("Promise")]),t._v(" ä¸­çš„å‡½æ•°æ˜¯ç«‹å³æ‰§è¡Œçš„ï¼Œè€Œåç»­çš„ "),n("code",[t._v(".then")]),t._v(" åˆ™ä¼šè¢«åˆ†å‘åˆ° "),n("code",[t._v("microtask")]),t._v(" çš„ "),n("code",[t._v("Promise")]),t._v(" é˜Ÿåˆ—ä¸­å»ã€‚æ‰€ä»¥ä¼šå…ˆè¾“å‡º promise1ï¼Œç„¶åæ‰§è¡Œ "),n("code",[t._v("resolve")]),t._v("ï¼Œå°† "),n("code",[t._v("promise2")]),t._v(" åˆ†é…åˆ°å¯¹åº”é˜Ÿåˆ—ã€‚")])]),t._v(" "),n("p",[n("img",{attrs:{src:"http://image.jinghao.xyz/blog/20200523/RaiHbtdVUqXa.png",alt:"mark"}})]),t._v(" "),n("ul",[n("li",[n("p",[t._v("5ã€"),n("code",[t._v("script")]),t._v(" ä»»åŠ¡ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œæœ€ååªæœ‰ä¸€å¥è¾“å‡ºäº† "),n("code",[t._v("script end")]),t._v("ï¼Œè‡³æ­¤ï¼Œå…¨å±€ä»»åŠ¡å°±æ‰§è¡Œå®Œæ¯•äº†ã€‚")])]),t._v(" "),n("li",[n("p",[t._v("6ã€æ ¹æ®ä¸Šè¿°ï¼Œæ¯æ¬¡æ‰§è¡Œå®Œä¸€ä¸ªå®ä»»åŠ¡ä¹‹åï¼Œä¼šå»æ£€æŸ¥æ˜¯å¦å­˜åœ¨ "),n("code",[t._v("Microtasks")]),t._v("ï¼›å¦‚æœæœ‰ï¼Œåˆ™æ‰§è¡Œ "),n("code",[t._v("Microtasks")]),t._v(" ç›´è‡³æ¸…ç©º "),n("code",[t._v("Microtask Queue")]),t._v("ã€‚å› è€Œåœ¨"),n("code",[t._v("script")]),t._v("ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œå¼€å§‹æŸ¥æ‰¾æ¸…ç©ºå¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚æ­¤æ—¶ï¼Œå¾®ä»»åŠ¡ä¸­ï¼Œ "),n("code",[t._v("Promise")]),t._v(" é˜Ÿåˆ—æœ‰çš„ä¸¤ä¸ªä»»åŠ¡ "),n("code",[t._v("async1 end")]),t._v(" å’Œ "),n("code",[t._v("promise2")]),t._v(" ï¼Œå› æ­¤æŒ‰å…ˆåé¡ºåºè¾“å‡º "),n("code",[t._v("async1 end")]),t._v(" ï¼Œ"),n("code",[t._v("promise2")]),t._v("ã€‚å½“æ‰€æœ‰çš„ "),n("code",[t._v("Microtasks")]),t._v(" æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œè¡¨ç¤ºç¬¬ä¸€è½®çš„å¾ªç¯å°±ç»“æŸäº†ã€‚")])]),t._v(" "),n("li",[n("p",[t._v("7ã€ç¬¬äºŒè½®å¾ªç¯ä¾æ—§ä»å®ä»»åŠ¡é˜Ÿåˆ—å¼€å§‹ã€‚æ­¤æ—¶å®ä»»åŠ¡ä¸­åªæœ‰ä¸€ä¸ª "),n("code",[t._v("setTimeout")]),t._v("ï¼Œå–å‡ºç›´æ¥è¾“å‡ºå³å¯ï¼Œè‡³æ­¤æ•´ä¸ªæµç¨‹ç»“æŸã€‚")])])]),t._v(" "),n("h3",{attrs:{id:"æœ€ç»ˆç»“æœ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æœ€ç»ˆç»“æœ"}},[t._v("#")]),t._v(" æœ€ç»ˆç»“æœ")]),t._v(" "),n("details",{staticClass:"custom-block details"},[n("summary",[t._v("ç¨‹åºç»“æœ")]),t._v(" "),n("p",[t._v("script start"),n("br"),t._v("\nasync1 start"),n("br"),t._v("\nasync2"),n("br"),t._v("\npromise1"),n("br"),t._v("\nscript end"),n("br"),t._v("\nasync1 end"),n("br"),t._v("\npromise2"),n("br"),t._v("\nsetTimeout")])]),t._v(" "),n("h3",{attrs:{id:"ç›¸ä¼¼é¢˜ä¸€"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç›¸ä¼¼é¢˜ä¸€"}},[t._v("#")]),t._v(" ç›¸ä¼¼é¢˜ä¸€")]),t._v(" "),n("ul",[n("li",[t._v("å°† "),n("code",[t._v("async2")]),t._v(" ä¸­çš„å‡½æ•°ä¹Ÿå˜æˆäº† "),n("code",[t._v("Promise")]),t._v(" å‡½æ•°ï¼Œä»£ç å¦‚ä¸‹ï¼š")])]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("async1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'async1 start'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("async2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'async1 end'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("async2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//async2åšå‡ºå¦‚ä¸‹æ›´æ”¹ï¼š")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'promise1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'promise2'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'script start'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'setTimeout'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("async1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'promise3'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'promise4'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'script end'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br")])]),n("details",{staticClass:"custom-block details"},[n("summary",[t._v("ç¨‹åºç»“æœ")]),t._v(" "),n("p",[t._v("script start"),n("br"),t._v("\nasync1 start"),n("br"),t._v("\npromise1"),n("br"),t._v("\npromise3"),n("br"),t._v("\nscript end"),n("br"),t._v("\npromise2"),n("br"),t._v("\nasync1 end"),n("br"),t._v("\npromise4"),n("br"),t._v("\nsetTimeout")])]),t._v(" "),n("h3",{attrs:{id:"ç›¸ä¼¼é¢˜äºŒ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç›¸ä¼¼é¢˜äºŒ"}},[t._v("#")]),t._v(" ç›¸ä¼¼é¢˜äºŒ")]),t._v(" "),n("ul",[n("li",[t._v("å°† "),n("code",[t._v("async1")]),t._v(" ä¸­ "),n("code",[t._v("await")]),t._v(" åé¢çš„ä»£ç å’Œ "),n("code",[t._v("async2")]),t._v(" çš„ä»£ç éƒ½æ”¹ä¸ºå¼‚æ­¥çš„ï¼Œä»£ç å¦‚ä¸‹ï¼š")])]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("async1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'async1 start'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("async2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//æ›´æ”¹å¦‚ä¸‹ï¼š")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'setTimeout1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("async2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//æ›´æ”¹å¦‚ä¸‹ï¼š")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'setTimeout2'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'script start'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'setTimeout3'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("async1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'promise1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'promise2'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'script end'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br")])]),n("details",{staticClass:"custom-block details"},[n("summary",[t._v("ç¨‹åºç»“æœ")]),t._v(" "),n("p",[t._v("script start"),n("br"),t._v("\nasync1 start"),n("br"),t._v("\npromise1"),n("br"),t._v("\nscript end"),n("br"),t._v("\npromise2"),n("br"),t._v("\nsetTimeout3"),n("br"),t._v("\nsetTimeout2"),n("br"),t._v("\nsetTimeout1")])]),t._v(" "),n("h2",{attrs:{id:"äºŒã€node-ä¸­çš„-javascript-äº‹ä»¶å¾ªç¯æœºåˆ¶"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#äºŒã€node-ä¸­çš„-javascript-äº‹ä»¶å¾ªç¯æœºåˆ¶"}},[t._v("#")]),t._v(" äºŒã€node ä¸­çš„ JavaScript äº‹ä»¶å¾ªç¯æœºåˆ¶")]),t._v(" "),n("h3",{attrs:{id:"node-çš„å¾®ä»»åŠ¡å’Œå®ä»»åŠ¡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#node-çš„å¾®ä»»åŠ¡å’Œå®ä»»åŠ¡"}},[t._v("#")]),t._v(" Node çš„å¾®ä»»åŠ¡å’Œå®ä»»åŠ¡")]),t._v(" "),n("h4",{attrs:{id:"æˆ‘ä»¬ä¼šå‘ç°ä»ä¸€æ¬¡äº‹ä»¶å¾ªç¯çš„-tick-æ¥è¯´-node-çš„äº‹ä»¶å¾ªç¯æ›´å¤æ‚-å®ƒä¹Ÿåˆ†ä¸ºå¾®ä»»åŠ¡å’Œå®ä»»åŠ¡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æˆ‘ä»¬ä¼šå‘ç°ä»ä¸€æ¬¡äº‹ä»¶å¾ªç¯çš„-tick-æ¥è¯´-node-çš„äº‹ä»¶å¾ªç¯æ›´å¤æ‚-å®ƒä¹Ÿåˆ†ä¸ºå¾®ä»»åŠ¡å’Œå®ä»»åŠ¡"}},[t._v("#")]),t._v(" æˆ‘ä»¬ä¼šå‘ç°ä»ä¸€æ¬¡äº‹ä»¶å¾ªç¯çš„ Tick æ¥è¯´ï¼ŒNode çš„äº‹ä»¶å¾ªç¯æ›´å¤æ‚ï¼Œå®ƒä¹Ÿåˆ†ä¸ºå¾®ä»»åŠ¡å’Œå®ä»»åŠ¡ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("å®ä»»åŠ¡ï¼ˆmacrotaskï¼‰ï¼šsetTimeoutã€setIntervalã€IO äº‹ä»¶ã€setImmediateã€close äº‹ä»¶ï¼›")]),t._v(" "),n("li",[t._v("å¾®ä»»åŠ¡ï¼ˆmicrotaskï¼‰ï¼šPromise çš„ then å›è°ƒã€process.nextTickã€queueMicrotask.")])]),t._v(" "),n("h4",{attrs:{id:"ä½†æ˜¯-node-ä¸­çš„äº‹ä»¶å¾ªç¯ä¸æµè§ˆå™¨æœ‰ä¸€äº›å·®åˆ«"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä½†æ˜¯-node-ä¸­çš„äº‹ä»¶å¾ªç¯ä¸æµè§ˆå™¨æœ‰ä¸€äº›å·®åˆ«"}},[t._v("#")]),t._v(" ä½†æ˜¯ï¼ŒNode ä¸­çš„äº‹ä»¶å¾ªç¯ä¸æµè§ˆå™¨æœ‰ä¸€äº›å·®åˆ«ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼š\nnext tick queueï¼šprocess.nextTick\nother queueï¼šPromise çš„ then å›è°ƒã€queueMicrotask")]),t._v(" "),n("li",[t._v("å®ä»»åŠ¡é˜Ÿåˆ—ï¼š\ntimer queueï¼šsetTimeoutã€setInterval\npoll queueï¼šIO äº‹ä»¶\ncheck queueï¼šsetImmediate\nclose queueï¼šclose äº‹ä»¶")])]),t._v(" "),n("h3",{attrs:{id:"node-ä¸­çš„äº‹ä»¶å¾ªç¯ä¼˜å…ˆçº§"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#node-ä¸­çš„äº‹ä»¶å¾ªç¯ä¼˜å…ˆçº§"}},[t._v("#")]),t._v(" Node ä¸­çš„äº‹ä»¶å¾ªç¯ä¼˜å…ˆçº§")]),t._v(" "),n("p",[n("img",{attrs:{src:"http://image.jinghao.xyz/iShot2021-01-18%2011.01.09.png",alt:"mark"}})]),t._v(" "),n("p",[n("strong",[t._v("main script -> nextTicks -> other microtask -> times -> immediate -> ä¸‹ä¸€ä¸ªå®ä»»åŠ¡ã€‚")])]),t._v(" "),n("h3",{attrs:{id:"æ¥ä¸ªä¾‹é¢˜åˆ†æä¸€ä¸‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ¥ä¸ªä¾‹é¢˜åˆ†æä¸€ä¸‹"}},[t._v("#")]),t._v(" æ¥ä¸ªä¾‹é¢˜åˆ†æä¸€ä¸‹")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("async1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'async1 start'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("async2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'async1 end'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setImmediate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'setImmediate'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("async2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'async2'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'script start'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'setTimeout0'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nprocess"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextTick")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'nextTick1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("async1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nprocess"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextTick")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'nextTick2'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'promise1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'promise2'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'promise3'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'script end'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br")])]),n("ul",[n("li",[n("p",[t._v("æŒ‰ç…§ä¸Šé¢ç†è®ºåˆ†æç»“æœå¦‚ä¸‹å›¾")])]),t._v(" "),n("li",[n("p",[t._v("æ³¨æ„ä¸€ç‚¹ promise é‡Œé¢æ‰§è¡Œ resolve() å å³æ‰§è¡Œ then() æŠŠå›è°ƒå‡½æ•°åŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—é‡Œé¢ã€‚")])]),t._v(" "),n("li",[n("p",[t._v("æ³¨æ„ä¸¤ç‚¹ await åé¢ç›¸å½“äº new promise ä¸€æ ·ï¼Œç›´æ¥æ‰§è¡Œã€‚åé¢çš„ä»£ç æ‰ä¼šåŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚\n"),n("img",{attrs:{src:"http://image.jinghao.xyz/nodeeventloopresult.png",alt:"mark"}})])]),t._v(" "),n("li",[n("p",[t._v("ç„¶åä¾æ¬¡æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š")])])]),t._v(" "),n("details",{staticClass:"custom-block details"},[n("summary",[t._v("ç¨‹åºç»“æœ")]),t._v(" "),n("p",[t._v("script start"),n("br"),t._v("\nasync1 start"),n("br"),t._v("\nasync2"),n("br"),t._v("\npromise1"),n("br"),t._v("\npromise2"),n("br"),t._v("\nscript end"),n("br"),t._v("\nnextTick1"),n("br"),t._v("\nnextTick2"),n("br"),t._v("\nasync1 end"),n("br"),t._v("\npromise3"),n("br"),t._v("\nsetTimeout0"),n("br"),t._v("\nsetImmediate")])]),t._v(" "),n("h3",{attrs:{id:"settimeout-å›è°ƒå‡½æ•°-0-ã€setimmediate-å›è°ƒå‡½æ•°-æ‰§è¡Œé¡ºåºåˆ†æ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#settimeout-å›è°ƒå‡½æ•°-0-ã€setimmediate-å›è°ƒå‡½æ•°-æ‰§è¡Œé¡ºåºåˆ†æ"}},[t._v("#")]),t._v(" setTimeout(å›è°ƒå‡½æ•°, 0)ã€setImmediate(å›è°ƒå‡½æ•°)æ‰§è¡Œé¡ºåºåˆ†æ")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("é¦–å…ˆç»“è®ºæ˜¯ï¼šè¿™ä¸¤ä¸ªåœ¨ node ä¸­çš„æ‰§è¡Œé¡ºåºæ˜¯ä¸ç¡®å®šçš„ã€‚")])]),t._v(" "),n("li",[n("p",[t._v("è°å…ˆæ‰§è¡Œå–å†³äºäº‹ä»¶å¾ªç¯å¼€å¯çš„æ—¶é—´ ä¸ setTimeout å‡½æ•°çš„æ‰§è¡Œæ—¶é—´çš„å¤§å°å…³ç³»ã€‚åœ¨ Node æºç çš„ deps/uv/src/timer.c ä¸­ 141 è¡Œï¼Œæœ‰ä¸€ä¸ª uv__next_timeout\nçš„å‡½æ•°å†³å®šäº†è¿™ä¸¤ä¸ªçš„æ‰§è¡Œé¡ºåºã€‚")])]),t._v(" "),n("li",[n("p",[t._v("æƒ…å†µä¸€ï¼šå¦‚æœäº‹ä»¶å¾ªç¯å¼€å¯çš„æ—¶é—´å°äº setTimeout å‡½æ•°çš„æ‰§è¡Œæ—¶é—´çš„ï¼Œä¹Ÿå°±æ„å‘³ç€å…ˆå¼€å¯äº† event-loopï¼Œè¿™ä¸ªæ—¶å€™æ‰§è¡Œåˆ° timer é˜¶æ®µï¼Œå¹¶æ²¡æœ‰\nå®šæ—¶å™¨çš„å›è°ƒè¢«æ”¾åˆ°å…¥ timer queue ä¸­ï¼›æ‰€ä»¥æ²¡æœ‰è¢«æ‰§è¡Œï¼Œè¿™ä¸ªæ—¶å€™æ˜¯å…ˆæ£€æµ‹ setImmediateï¼Œç¬¬äºŒæ¬¡çš„ tick ä¸­æ‰§è¡Œäº† timer ä¸­çš„ setTimeoutã€‚")]),t._v(" "),n("p",[n("strong",[t._v("å³ å…ˆ setImmediate å setTimeoutã€‚")])])]),t._v(" "),n("li",[n("p",[t._v("æƒ…å†µäºŒï¼šå¦‚æœäº‹ä»¶å¾ªç¯å¼€å¯çš„æ—¶é—´å¤§äº setTimeout å‡½æ•°çš„æ‰§è¡Œæ—¶é—´çš„ï¼›\nè¿™å°±æ„å‘³ç€åœ¨ç¬¬ä¸€æ¬¡ tick ä¸­ï¼Œå·²ç»å‡†å¤‡å¥½äº† timer queueï¼›æ‰€ä»¥ä¼šç›´æ¥æŒ‰ç…§é¡ºåºæ‰§è¡Œå³å¯ã€‚")]),t._v(" "),n("p",[n("strong",[t._v("å³ å…ˆ setTimeout å setImmediateã€‚")])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);